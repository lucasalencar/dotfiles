#!/bin/bash
source helpers

ensure_command_exists brew

info "Installing Emacs"
brew tap d12frosted/emacs-plus
brew install emacs-plus
cp -rf /usr/local/opt/emacs-plus/Emacs.app /Applications

git clone --branch develop https://github.com/hlissner/doom-emacs ~/.emacs.d

if [ ! -h $HOME/.doom.d ]; then
  current_dir
  ln -sf $CURRENT_DIR/doom.d.symlink $HOME/.doom.d
fi

EMACS_D="$HOME/.emacs.d"
$EMACS_D/bin/doom install
$EMACS_D/bin/doom -y sync

exit 0
